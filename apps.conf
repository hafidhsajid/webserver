<VirtualHost *:80>
  ServerName sultonyakbar.my.id
  ServerAlias www.sultonyakbar.my.id

  Redirect permanent / https://sultonyakbar.my.id/
</VirtualHost>

<VirtualHost *:443>
  ServerName sultonyakbar.my.id
  ServerAlias www.example.com
  DocumentRoot /var/www/html/sultonyakbar.my.id

  Protocols h2 http:/1.1

  <If "%{HTTP_HOST} == 'www.sultonyakbar.my.id'">
    Redirect permanent / https://sultonyakbar.my.id/
  </If>
  
  ErrorLog ${APACHE_LOG_DIR}/sultonyakbar.my.id.com-error.log
  CustomLog ${APACHE_LOG_DIR}/sultonyakbar.my.id-access.log combined

  SSLEngine On
  SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem
  SSLOpenSSLConfCmd DHParameters "/etc/ssl/certs/dhparam.pem"
  
  SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
  SSLProtocol All -SSLv2 -SSLv3 -TLSv1 -TLSv1.1
  SSLCompression off
  SSLUseStapling on

  <Directory /var/www/html/sultonyakbar.my.id/>
       Options FollowSymlinks
       AllowOverride All
       Require all granted
  </Directory>
 
  <Directory /var/www/html/sultonyakbar.my.id/>
       RewriteEngine on
       RewriteBase /
       RewriteCond %{REQUEST_FILENAME} !-f
       RewriteRule ^(.*) index.php [PT,L]
  </Directory>
</VirtualHost>
